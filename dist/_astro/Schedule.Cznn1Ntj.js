import{g as I,i as q,c,o as d,e as b,F,r as E,J as U,n as z,h as T,j as K,K as W,L as C,a as u,t as f,d as A}from"./runtime-core.esm-bundler.BdZShyii.js";/* empty css                       */import{_ as j}from"./_plugin-vue_export-helper.DlAUqK2U.js";const N=()=>{const w=I(null),o=I(!0),s=I(null),t=l=>l?new Date(l).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:"Asia/Bangkok"}):"",y=async()=>{try{const l=await fetch("https://mnra2lgb52.execute-api.ap-southeast-1.amazonaws.com/dev/schedule-week");if(!l.ok)throw new Error("Failed to fetch schedule");const n=await l.json(),h=n.items.map(e=>{let k=e.property_time;if(e.property_date?.start&&e.property_date?.end){const _=t(e.property_date.start),S=t(e.property_date.end);k=`${_} - ${S}`}return{id:e.id,name:e.name,url:e.url,bookingUrl:e.property_booking_url,day:e.property_day,price:e.property_price?.length?e.property_price[0]:null,taxi:e.property_taxi,time:k,location:e.property_location?.length?e.property_location[0]:null,googleCalendarId:e.property_google_calendar_id,tags:e.property_tags?.length?e.property_tags[0]:null,date:e.property_date,createdTime:e.property_created_time,teacher:e.property_teacher?.length?e.property_teacher[0]:null}});w.value={items:h,date:n._date},s.value=null}catch(l){s.value=l.message}finally{o.value=!1}};return q(()=>{y()}),{schedule:w,loading:o,error:s}},V={__name:"SkeletonLoader",props:{shape:{type:String,default:"rectangle",validator:w=>["rectangle","circle","text"].includes(w)},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:100},animate:{type:Boolean,default:!0},lines:{type:Number,default:3},lastLineWidth:{type:Number,default:60}},setup(w,{expose:o}){o();const s=w,t=T(()=>{const l={};if(typeof s.width=="number"?l.width=`${s.width}px`:l.width=s.width,typeof s.height=="number"?l.height=`${s.height}px`:l.height=s.height,s.shape==="circle"){const n=typeof s.height=="number"?`${s.height}px`:s.height;l.width=n,l.height=n}return l}),y={props:s,skeletonStyle:t,computed:T};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},G={key:0,class:"skeleton-loader__lines"};function J(w,o,s,t,y,l){return d(),c("div",{class:z(["skeleton-loader",`skeleton-loader--${s.shape}`,{"skeleton-loader--animate":s.animate}]),style:U(t.skeletonStyle)},[s.shape==="text"?(d(),c("div",G,[(d(!0),c(F,null,E(s.lines,n=>(d(),c("div",{key:n,class:"skeleton-loader__line",style:U({width:n===s.lines?`${s.lastLineWidth}%`:"100%"})},null,4))),128))])):b("",!0)],6)}const $=j(V,[["render",J],["__scopeId","data-v-b904458f"]]),Z={__name:"ScheduleSchema",setup(w,{expose:o}){o();const{schedule:s}=N(),t=n=>{const h={"@context":"https://schema.org","@type":"Event",name:n.name,description:`Join us at KOH TAO YOGA for a ${n.name} class with ${n.teacher}. Located just 50m from the pier in the heart of Koh Tao, our state-of-the-art 200+ mÂ² wellness center is the island's largest and most welcoming yoga studio. Our climate-controlled facility features a modern main studio and two stunning rooftop shalas with panoramic ocean views. We offer over 8 different yoga styles including Vinyasa Flow, Ashtanga, Hatha, Yin and Acro yoga, plus transformative wellness experiences like breathwork, ice baths (Wim Hof Method), and sound healing. With 35+ weekly classes, expert-certified teachers, and small group sizes, we ensure personalized attention whether you're a beginner or advanced practitioner. Our peaceful space is never crowded, equipment is top quality, and our location couldn't be more convenient. Experience the best yoga in Koh Tao and let our passionate instructors guide you on your wellness journey. Join our friendly community and discover why we're recognized as Koh Tao's premier yoga and wellness destination.`,startDate:n.date?.start,endDate:n.date?.end,eventStatus:"https://schema.org/EventScheduled",location:{"@type":"Place",name:"KOH TAO YOGA - Yoga & Wellness Center",address:{"@type":"PostalAddress",streetAddress:"25, 111 Koh Phangan, Koh Tao",addressLocality:"Tambon Ko Tao",addressRegion:"Amphoe Ko Pha-ngan, Chang Wat Surat Thani",postalCode:"84360",addressCountry:"TH"}},performer:{"@type":"Person",name:n.teacher},organizer:{"@type":"Organization",name:"KOH TAO YOGA - Yoga & Wellness Center",url:"https://kohtaoyoga.com"}};n.bookingUrl&&n.price&&(h.offers={"@type":"Offer",url:n.bookingUrl,price:parseFloat(n.price.replace(/[^\d.]/g,"")),priceCurrency:"THB",availability:"https://schema.org/InStock",validFrom:n.date?.start});const e=Math.floor(Math.random()*18)+1;return h.image=[`https://kohtaoyoga.com/images/misc/kty${e}.jpeg`],h},y=T(()=>s.value?.items?s.value.items.map(n=>t(n)):[]);K(y,n=>{n&&n.length>0&&(document.querySelectorAll('script[data-schema="event"]').forEach(e=>e.remove()),n.forEach((e,k)=>{const _=document.createElement("script");_.type="application/ld+json",_.setAttribute("data-schema","event"),_.setAttribute("data-event-index",k),_.text=JSON.stringify(e,null,2),document.head.appendChild(_)}))},{immediate:!0}),W(()=>{document.querySelectorAll('script[data-schema="event"]').forEach(h=>h.remove())});const l={schedule:s,generateEventSchema:t,eventSchemas:y,computed:T,watch:K,onUnmounted:W,get useSchedule(){return N}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}};function Q(w,o,s,t,y,l){return null}const X=j(Z,[["render",Q]]),ee={__name:"Schedule",setup(w,{expose:o}){o();const{schedule:s,loading:t,error:y}=N(),l=new Date,n=new Date;n.setDate(l.getDate()+1);const h={weekday:"long"},e=new Intl.DateTimeFormat("en-US",h).format(l),k=new Intl.DateTimeFormat("en-US",h).format(n),_=a=>{const i=new Date,p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(a),g=i.getDay();let r=p-g;r<0&&(r+=7);const m=new Date(i);return m.setDate(i.getDate()+r),m.setHours(0,0,0,0),m},S=a=>{if(!a.date||!a.date.start)return null;const i=new Date(a.date.start);return isNaN(i.getTime())?null:i},O=a=>{if(!a.date||!a.date.end)return null;const i=new Date(a.date.end);return isNaN(i.getTime())?null:i},B=a=>{const i=O(a);return i?i.getTime()<new Date().getTime():!1},M=a=>a===e?`Today (${a})`:a===k?`Tomorrow (${a})`:a,H=a=>{const i=_(a),p={month:"short",day:"numeric"};return new Intl.DateTimeFormat("en-US",p).format(i)},x=T(()=>{if(!s.value||!s.value.items)return{};const a={},i=new Set;s.value.items.forEach(r=>{r.day&&(i.add(r.day),a[r.day]||(a[r.day]=[]),a[r.day].push(r))});const p=Array.from(i).sort((r,m)=>{const v=_(r),D=_(m);return v.getTime()-D.getTime()}),g={};return p.forEach(r=>{a[r]&&(a[r].sort((m,v)=>{const D=S(m),P=S(v);return!D||!P?0:D.getTime()-P.getTime()}),g[r]=a[r])}),g}),Y=T(()=>{const a=new Date().getTime();for(const i in x.value)for(const p of x.value[i]){const g=S(p),r=O(p);if(g&&r){const m=g.getTime(),v=r.getTime();if(a>=m&&a<=v)return p}}return null}),R=T(()=>{const a=new Date().getTime();let i=null,p=1/0;for(const g in x.value)for(const r of x.value[g]){const m=S(r);if(m&&m.getTime()>a){const v=m.getTime()-a;v<p&&(p=v,i=r)}}return i}),L={schedule:s,loading:t,error:y,today:l,tomorrow:n,options:h,todayName:e,tomorrowName:k,getDayDate:_,getDateTimeFromItem:S,getEndDateTimeFromItem:O,isClassPast:B,getFormattedDayName:M,getFormattedDateForDay:H,groupedSchedule:x,currentClassItem:Y,nextClassItem:R,formatTimeRemaining:a=>{const i=new Date,p=a.getTime()-i.getTime();if(p<0)return"";const g=Math.floor(p/(1e3*60)),r=Math.floor(g/60),m=Math.floor(r/24);return m>0?`in ${m}d ${r%24}h ${g%60}m`:r>0?`in ${r}h ${g%60}m`:g>0?`in ${g}m`:"now"},ref:I,computed:T,get useSchedule(){return N},SkeletonLoader:$,ScheduleSchema:X};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}},te={class:"schedule-container"},ne={key:0,class:"schedule-content"},ae={key:1,class:"error-message"},se={key:2,class:"schedule-content"},re={key:0,class:"next-class-highlight"},oe={class:"time-remaining"},le=["href"],ie={key:1,class:"current-class-highlight"},ce={key:0,class:"day-title"},de={class:"day-date"},ue={key:1,class:"class-list"},he={class:"class-info"},me={class:"class-name"},pe={class:"class-details"},ge={class:"class-time"},fe={class:"class-teacher"},ye={key:0,class:"class-price"},_e=["href"],we={key:2,class:"no-classes"};function ve(w,o,s,t,y,l){return d(),c(F,null,[C(t.ScheduleSchema),u("div",te,[t.loading?(d(),c("div",ne,[o[0]||(o[0]=u("h1",{class:"schedule-title"},"Yoga & Wellness Schedule",-1)),C(t.SkeletonLoader),o[1]||(o[1]=u("br",null,null,-1)),C(t.SkeletonLoader),o[2]||(o[2]=u("br",null,null,-1)),C(t.SkeletonLoader)])):t.error?(d(),c("div",ae,"Error: "+f(t.error),1)):(d(),c("div",se,[o[5]||(o[5]=u("h1",{class:"schedule-title"},"Yoga & Wellness Schedule",-1)),o[6]||(o[6]=u("p",{class:"schedule-subtitle"},[u("strong",null,"Booking is optional"),A(" you can also just come. Pay on arrival. ")],-1)),t.nextClassItem?(d(),c("div",re,[o[3]||(o[3]=u("h3",null,"Next Class:",-1)),u("p",null,[A(f(t.nextClassItem.name)+" at "+f(t.nextClassItem.time)+" with "+f(t.nextClassItem.teacher)+" ",1),u("span",oe,"("+f(t.formatTimeRemaining(t.getDateTimeFromItem(t.nextClassItem)))+")",1)]),t.nextClassItem.bookingUrl?(d(),c("a",{key:0,href:t.nextClassItem.bookingUrl,target:"_blank",rel:"noopener noreferrer",class:"book-now-button next-class-button"},"Reserve mat",8,le)):b("",!0)])):b("",!0),t.currentClassItem?(d(),c("div",ie,[o[4]||(o[4]=u("h3",null,"Current Class:",-1)),u("p",null,f(t.currentClassItem.name)+" at "+f(t.currentClassItem.time)+" with "+f(t.currentClassItem.teacher),1)])):b("",!0),(d(!0),c(F,null,E(t.groupedSchedule,(n,h)=>(d(),c("div",{key:h,class:"schedule-day-group"},[n.length>0?(d(),c("h2",ce,[A(f(t.getFormattedDayName(h))+" ",1),u("span",de,f(t.getFormattedDateForDay(h)),1)])):b("",!0),n.length>0?(d(),c("ul",ue,[(d(!0),c(F,null,E(n,e=>(d(),c("li",{key:e.id,class:z({"class-item":!0,"past-class":t.isClassPast(e),"next-class":e===t.nextClassItem})},[u("div",he,[u("div",me,f(e.name),1),u("div",pe,[u("span",ge,f(e.time),1),u("span",fe,f(e.teacher),1),e.price?(d(),c("span",ye,f(e.price),1)):b("",!0)])]),e.bookingUrl&&!t.isClassPast(e)?(d(),c("a",{key:0,href:e.bookingUrl,target:"_blank",rel:"noopener noreferrer",class:"book-now-button"},"Reserve mat",8,_e)):b("",!0)],2))),128))])):(d(),c("p",we,"No classes scheduled for "+f(h),1))]))),128))]))])],64)}const xe=j(ee,[["render",ve],["__scopeId","data-v-84b59233"]]);export{xe as default};
