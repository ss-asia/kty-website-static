(function(){var g=function(e){if(this.element=e,this.menuToggle=this.element.getElementsByClassName("js-morph-nav__sm-menu-toggle"),this.nav=this.element.getElementsByClassName("js-morph-nav__sm-dropdown"),this.morphDropown=this.element.getElementsByClassName("js-morph-nav__lg-subnav"),this.morphDpWrapper=this.element.getElementsByClassName("js-morph-nav__lg-dropdown-wrapper"),this.morphBg=this.element.getElementsByClassName("js-morph-nav__lg-dropdown-bg"),this.navItems=this.element.getElementsByClassName("js-morph-nav__lg-nav-item"),this.navDropdowns=this.element.getElementsByClassName("js-morph-nav__lg-dropdown-item"),this.nav.length<1||this.menuToggle.length<1||this.morphBg.length<1)return!1;this.navFirstFocusable=E(this),this.indexKeyDropdown=-1,this.dropdownFocusableItems=[],F(this)};function E(e){for(var t=e.nav[0].querySelectorAll('[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), [contenteditable], audio[controls], video[controls], summary'),n=!1,r=0;r<t.length;r++)if(t[r].offsetWidth||t[r].offsetHeight||t[r].getClientRects().length){n=t[r];break}return n}function F(e){N(e),e.menuToggle[0].addEventListener("click",function(n){L(e)}),C(e);for(var t=0;t<e.navItems.length;t++)(function(n){T(e,n),B(e,n)})(t)}function L(e){var t=e.nav[0].classList.toggle("morph-nav__sm-dropdown--is-visible");e.menuToggle[0].setAttribute("aria-expanded",t),t&&e.navFirstFocusable&&e.navFirstFocusable.focus()}function T(e,t){e.navItems[t].addEventListener("mouseenter",function(n){w(e,t)}),e.navItems[t].addEventListener("mouseleave",function(n){setTimeout(function(){p(e,t)||(p(e)?y(e,t):m(e,t))},50)}),e.navDropdowns[t].addEventListener("mouseleave",function(n){setTimeout(function(){p(e,t)||(p(e)?y(e,t):m(e,t))},50)})}function B(e,t){e.navItems[t].addEventListener("click",function(n){e.navDropdowns[t].classList.contains("morph-nav__lg-dropdown-item--is-visible")?m(e,t):w(e,t,function(){e.dropdownFocusableItems[t].length>0&&e.dropdownFocusableItems[t][0].focus()})})}function p(e,t){var n=!1;if(typeof t<"u")return!!(e.navItems[t].matches(":hover")||e.navDropdowns[t].matches(":hover"));for(var r=0;r<e.navItems.length;r++)if(e.navItems[r].matches(":hover")||e.navDropdowns[r].matches(":hover")){n=!0;break}return n}function w(e,t,n){var r=0,s=300;e.morphBg[0].classList.contains("morph-nav__lg-dropdown-bg--is-visible")||(r=50,s=0),I(e,t,s),setTimeout(function(){e.morphDropown[0].classList.add("morph-nav__lg-subnav--is-visible"),e.morphBg[0].classList.add("morph-nav__lg-dropdown-bg--is-visible"),e.navDropdowns[t].classList.add("morph-nav__lg-dropdown-item--is-visible"),d(e,t,"true"),n&&n()},r)}function m(e,t){e.morphDropown[0].classList.remove("morph-nav__lg-subnav--is-visible"),e.morphBg[0].classList.remove("morph-nav__lg-dropdown-bg--is-visible"),e.navDropdowns[t].classList.remove("morph-nav__lg-dropdown-item--is-visible"),d(e,t,"false")}function y(e,t){e.navDropdowns[t].classList.remove("morph-nav__lg-dropdown-item--is-visible"),d(e,t,"false")}function I(e,t,n){var r=0,s=0,o=0;if(e.navItems[t])var i=e.navItems[t].getBoundingClientRect(),o=i.left,u=i.width;if(e.navDropdowns[t])var l=e.navDropdowns[t].getBoundingClientRect(),r=l.height,s=l.width;M(e,r,s,o-s/2+u/2,n)}function d(e,t,n){var r=e.navItems[t].querySelector("button");r&&r.setAttribute("aria-exanded",n)}function C(e){window.addEventListener("keyup",function(t){t.key&&t.key.toLowerCase()=="escape"&&!h(e)&&e.menuToggle[0].getAttribute("aria-expanded")=="true"&&document.activeElement.closest(".js-morph-nav")&&(e.menuToggle[0].click(),e.menuToggle[0].focus()),t.key&&t.key.toLowerCase()=="tab"&&!h(e)&&e.menuToggle[0].getAttribute("aria-expanded")=="true"&&!document.activeElement.closest(".js-morph-nav")&&e.menuToggle[0].click()}),window.addEventListener("keydown",function(t){if(t.key&&t.key.toLowerCase()=="tab"&&h(e)){e.indexKeyDropdown=W(e);var n=t.shiftKey?"prev":"next";e.indexKeyDropdown>-1&&k(e,n,t)}})}function W(e){for(var t=-1,n=0;n<e.navDropdowns.length;n++)if(e.navItems[n].matches(":focus-within")||e.navDropdowns[n].matches(":focus-within")){t=n;break}return t}function k(e,t,n){e.dropdownFocusableItems[e.indexKeyDropdown][0]==document.activeElement&&t=="prev"&&D(e,n,e.indexKeyDropdown),e.dropdownFocusableItems[e.indexKeyDropdown][e.dropdownFocusableItems[e.indexKeyDropdown].length-1]==document.activeElement&&t=="next"&&D(e,n,e.indexKeyDropdown)}function D(e,t,n){t.preventDefault();var r=e.navItems[n].querySelector("button, a");r&&r.focus(),m(e,n)}function N(e){for(var t=0;t<e.navDropdowns.length;t++)e.dropdownFocusableItems[t]=e.navDropdowns[t].querySelectorAll(K)}function h(e){return!(e.menuToggle[0].offsetWidth||e.menuToggle[0].offsetHeight||e.menuToggle[0].getClientRects().length)}function M(e,t,n,r,s){if(s==0){e.morphDpWrapper[0].style.height=t+"px",e.morphDpWrapper[0].style.width=n+"px",e.morphDpWrapper[0].style.transform="translateX("+r+"px)";return}var o=e.morphDpWrapper[0].offsetWidth,i=e.morphDpWrapper[0].offsetHeight,u=S(),l=null,_=function(v){l||(l=v);var a=v-l;a>s&&(a=s);var A=Math.easeOutQuart(a,i,t-i,s),x=Math.easeOutQuart(a,o,n-o,s),q=Math.easeOutQuart(a,u,r-u,s);e.morphDpWrapper[0].style.height=A+"px",e.morphDpWrapper[0].style.width=x+"px",e.morphDpWrapper[0].style.transform="translateX("+q+"px)",a<s&&window.requestAnimationFrame(_)};function S(){var v=window.getComputedStyle(e.morphDpWrapper[0]),a=new WebKitCSSMatrix(v.transform);return a.m41}e.morphDpWrapper[0].style.height=i+"px",e.morphDpWrapper[0].style.width=o+"px",window.requestAnimationFrame(_)}Math.easeOutQuart=function(e,t,n,r){return e/=r,e--,-n*(e*e*e*e-1)+t};var K='[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), [contenteditable], audio[controls], video[controls], summary';window.MorphNav=g;var c=document.getElementsByClassName("js-morph-nav");if(c.length>0)for(var f=0;f<c.length;f++)(function(e){new g(c[e])})(f)})();
