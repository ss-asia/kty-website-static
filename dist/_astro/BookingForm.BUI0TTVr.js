import{w as B,v as p}from"./runtime-dom.esm-bundler.BulcjZOR.js";/* empty css                              */import{_ as I}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as i,a as t,b as F,e as n,F as P,r as O,t as r,w as y,d as _,n as h,f as k,g,h as M,i as w,j as N,o as s}from"./runtime-core.esm-bundler.BdZShyii.js";const T=!0,V={__name:"BookingForm",setup(E,{expose:e}){e();const v="https://flow.thailandboattickets.com/webhook-test/66bce98f-9941-46c2-aba2-4c1d6dd4bdb5",o=k({peopleCount:2,name:"",email:"",couponCode:"",isMember:!1}),d=k({i:"",date:"",title:"",teacher:"",time:"",display_date:"",price:"",taxi:""}),c=k({peopleCount:"",name:"",email:"",isMember:""}),l=g(!1),b=g(!1),f=g(""),x=M(()=>d.title||d.teacher||d.display_date||o.name||o.email||o.peopleCount);w(()=>{const a=new URLSearchParams(window.location.search);d.i=a.get("i")||"",d.date=a.get("date")||"",d.title=a.get("title")||"",d.teacher=a.get("teacher")||"",d.time=a.get("time")||"",d.display_date=a.get("display_date")||"",d.price=a.get("price")||"",d.taxi=a.get("taxi")||"";try{const u=localStorage.getItem("booking");if(u){const m=JSON.parse(u);m.person_name&&(o.name=m.person_name),m.person_amount&&(o.peopleCount=m.person_amount),m.contact&&(o.email=m.contact),m.is_member!==void 0&&(o.isMember=m.is_member)}}catch(u){console.error("Error loading booking from cache:",u)}}),N(()=>[o.name,o.email,o.peopleCount],()=>{try{const a={person_name:o.name,person_amount:o.peopleCount,contact:o.email};localStorage.setItem("booking",JSON.stringify(a))}catch(a){console.error("Error saving booking to cache:",a)}});const D=()=>{let a=!0;return c.peopleCount="",c.name="",c.email="",c.isMember="",(!o.peopleCount||o.peopleCount<1)&&(c.peopleCount="Please select number of people",a=!1),o.name.trim()||(c.name="Name is required",a=!1),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(c.email="Please enter a valid email",a=!1):(c.email="Email is required",a=!1),(o.isMember===null||o.isMember===void 0)&&(c.isMember="Please select your member status",a=!1),a},C={testMode:T,BOOKING_API_ENDPOINT:v,formData:o,bookingData:d,errors:c,isSubmitting:l,submitSuccess:b,submitError:f,hasBookingData:x,validateForm:D,resetForm:()=>{o.couponCode="",o.peopleCount=2,o.isMember=!1,b.value=!1,f.value=""},handleSubmit:async()=>{if(D()){l.value=!0,b.value=!1,f.value="";try{const a={...o,...d,submittedAt:new Date().toISOString()};if(!(await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to submit booking");b.value=!0;try{const m=localStorage.getItem("booking"),S=m?JSON.parse(m):{};S.is_member=o.isMember,localStorage.setItem("booking",JSON.stringify(S))}catch(m){console.error("Error saving booking to cache:",m)}}catch(a){console.error("Error submitting booking:",a),f.value="Failed to submit booking. Please try again."}finally{l.value=!1}}},ref:g,reactive:k,onMounted:w,computed:M,watch:N};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}},U={class:"booking-container"},q={class:"booking-form-card"},J={key:0,class:"success-state"},R={class:"form-field"},A={class:"people-selector"},Y=["onClick"],j={key:0,class:"form-error"},W={class:"form-field"},H={key:0,class:"form-error"},L={class:"form-field"},z={key:0,class:"form-error"},G={class:"form-field"},K={class:"form-field"},Q={class:"yes-no-buttons"},X={key:0,class:"form-error"},Z=["disabled"],$={key:0,class:"button-loader"},oo={key:1},eo={key:0,class:"button-hint"},to={key:1,class:"error-message"},ao={class:"booking-info-card"},io={key:0,class:"booking-details"},so={key:0,class:"booking-detail-item"},lo={class:"booking-detail-value"},ro={key:1,class:"booking-detail-item"},no={class:"booking-detail-value"},mo={key:2,class:"booking-detail-item"},co={class:"booking-detail-value"},bo={key:3,class:"booking-detail-item"},uo={class:"booking-detail-value"},fo={key:4,class:"booking-detail-item"},ko={class:"booking-detail-value"},go={key:5,class:"booking-detail-item"},vo={class:"booking-detail-value"},po={key:6,class:"booking-detail-item"},yo={class:"booking-detail-value"},_o={key:7,class:"booking-detail-item"},ho={class:"booking-detail-value"},Do={key:8,class:"booking-detail-item"},Co={class:"booking-detail-value"},So={class:"booking-detail-item"},Mo={class:"booking-detail-value"},wo={key:1,class:"booking-details-empty"};function No(E,e,v,o,d,c){return s(),i("div",U,[t("div",q,[o.submitSuccess?(s(),i("div",J,[e[5]||(e[5]=F('<div class="success-icon" data-v-dd162551><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-dd162551><circle cx="12" cy="12" r="10" data-v-dd162551></circle><path d="M9 12l2 2 4-4" data-v-dd162551></path></svg></div><h2 class="success-title" data-v-dd162551>Thank You!</h2><p class="success-message" data-v-dd162551> Your mat has been reserved successfully! We&#39;ll contact you soon with confirmation details. </p>',3)),t("button",{onClick:o.resetForm,class:"reset-button"}," Make Another Booking ")])):(s(),i("form",{key:1,onSubmit:B(o.handleSubmit,["prevent"]),class:"booking-form"},[t("div",R,[e[6]||(e[6]=t("label",{class:"form-label",for:"people-count"}," How many people ",-1)),t("div",A,[(s(),i(P,null,O(8,l=>t("button",{key:l,type:"button",class:h(["people-button",{"people-button--active":o.formData.peopleCount===l}]),onClick:b=>o.formData.peopleCount=l},r(l),11,Y)),64))]),o.errors.peopleCount?(s(),i("div",j,r(o.errors.peopleCount),1)):n("",!0)]),t("div",W,[e[7]||(e[7]=t("label",{class:"form-label",for:"name"},[_(" Your name "),t("span",{class:"form-required"},"*")],-1)),y(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=l=>o.formData.name=l),type:"text",class:"form-input",placeholder:"Enter your name",autocomplete:"name"},null,512),[[p,o.formData.name]]),o.errors.name?(s(),i("div",H,r(o.errors.name),1)):n("",!0)]),t("div",L,[e[8]||(e[8]=t("label",{class:"form-label",for:"email"},[_(" Email "),t("span",{class:"form-required"},"*")],-1)),e[9]||(e[9]=t("p",{class:"form-description"},"We use your email only to inform you about your booking",-1)),y(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=l=>o.formData.email=l),type:"email",class:"form-input",placeholder:"your.email@example.com",autocomplete:"email"},null,512),[[p,o.formData.email]]),o.errors.email?(s(),i("div",z,r(o.errors.email),1)):n("",!0)]),t("div",G,[e[10]||(e[10]=t("label",{class:"form-label",for:"coupon"}," Coupon Code (optional) ",-1)),e[11]||(e[11]=t("p",{class:"form-description"}," If you have a coupon code you can enter it here. When you pay at the studio you will get your discount. ",-1)),y(t("input",{id:"coupon","onUpdate:modelValue":e[2]||(e[2]=l=>o.formData.couponCode=l),type:"text",class:"form-input",placeholder:"Enter coupon code",autocomplete:"off"},null,512),[[p,o.formData.couponCode]])]),t("div",K,[e[12]||(e[12]=t("label",{class:"form-label"},[_(" Are you already a member? "),t("span",{class:"form-required"},"*")],-1)),t("div",Q,[t("button",{type:"button",class:h(["yn-button",{"yn-button--active":o.formData.isMember===!0}]),onClick:e[3]||(e[3]=l=>o.formData.isMember=!0)}," Yes ",2),t("button",{type:"button",class:h(["yn-button",{"yn-button--active":o.formData.isMember===!1}]),onClick:e[4]||(e[4]=l=>o.formData.isMember=!1)}," No ",2)]),o.errors.isMember?(s(),i("div",X,r(o.errors.isMember),1)):n("",!0)]),t("button",{type:"submit",class:"submit-button",disabled:o.isSubmitting||!o.formData.name.trim()||!o.formData.email.trim()},[o.isSubmitting?(s(),i("span",$)):(s(),i("span",oo,"Reserve mat"))],8,Z),!o.formData.name.trim()||!o.formData.email.trim()?(s(),i("div",eo," Fill your email plus name to reserve your mat ")):n("",!0),o.submitError?(s(),i("div",to,r(o.submitError),1)):n("",!0)],32))]),t("div",ao,[e[25]||(e[25]=t("h2",{class:"booking-info-title"},"Booking Summary",-1)),o.hasBookingData?(s(),i("div",io,[o.bookingData.title?(s(),i("div",so,[e[13]||(e[13]=t("div",{class:"booking-detail-label"},"Class",-1)),t("div",lo,r(decodeURIComponent(o.bookingData.title)),1)])):n("",!0),o.bookingData.teacher?(s(),i("div",ro,[e[14]||(e[14]=t("div",{class:"booking-detail-label"},"Teacher",-1)),t("div",no,r(o.bookingData.teacher),1)])):n("",!0),o.bookingData.display_date?(s(),i("div",mo,[e[15]||(e[15]=t("div",{class:"booking-detail-label"},"Date",-1)),t("div",co,r(decodeURIComponent(o.bookingData.display_date)),1)])):n("",!0),o.bookingData.time?(s(),i("div",bo,[e[16]||(e[16]=t("div",{class:"booking-detail-label"},"Time",-1)),t("div",uo,r(decodeURIComponent(o.bookingData.time)),1)])):n("",!0),o.bookingData.price?(s(),i("div",fo,[e[17]||(e[17]=t("div",{class:"booking-detail-label"},"Price",-1)),t("div",ko,r(o.bookingData.price)+" THB",1)])):n("",!0),e[23]||(e[23]=t("div",{class:"booking-detail-divider"},null,-1)),o.formData.peopleCount?(s(),i("div",go,[e[18]||(e[18]=t("div",{class:"booking-detail-label"},"Number of People",-1)),t("div",vo,r(o.formData.peopleCount),1)])):n("",!0),o.formData.name?(s(),i("div",po,[e[19]||(e[19]=t("div",{class:"booking-detail-label"},"Name",-1)),t("div",yo,r(o.formData.name),1)])):n("",!0),o.formData.email?(s(),i("div",_o,[e[20]||(e[20]=t("div",{class:"booking-detail-label"},"Email",-1)),t("div",ho,r(o.formData.email),1)])):n("",!0),o.formData.couponCode?(s(),i("div",Do,[e[21]||(e[21]=t("div",{class:"booking-detail-label"},"Coupon Code",-1)),t("div",Co,r(o.formData.couponCode),1)])):n("",!0),t("div",So,[e[22]||(e[22]=t("div",{class:"booking-detail-label"},"Member Status",-1)),t("div",Mo,r(o.formData.isMember?"Member":"Not a member"),1)])])):(s(),i("div",wo,e[24]||(e[24]=[t("p",null,"Fill in the form to see your booking details",-1)])))])])}const Oo=I(V,[["render",No],["__scopeId","data-v-dd162551"]]);export{Oo as default};
