import{w as N,v as w}from"./runtime-dom.esm-bundler.DMOZHPRi.js";/* empty css                              */import{_ as T}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as a,d as r,a as o,b as F,e as d,t as s,F as E,r as L,n as p,w as _,f as k,g as f,h as C,o as P,j as n}from"./runtime-core.esm-bundler.CHSTTtMx.js";const B="https://flow.thailandboattickets.com/webhook/kty-reserve-mat",O={__name:"IceBathBookingForm",setup(I,{expose:t}){t();const l=k({date:"",timeslot:"",id:"",type:""}),e=k({peopleCount:1,name:"",email:"",choice:"self"}),y=k({peopleCount:"",name:"",email:""}),g=f(!1),i=f(!1),u=f(""),x=f(!1),h=f(!0),S=C(()=>e.choice==="guided"?400:300);P(()=>{const m=new URLSearchParams(window.location.search);l.date=m.get("date")||"",l.timeslot=m.get("timeslot")||"",l.id=m.get("id")||"";const c=m.get("type");(c==="guided"||c==="self"||c==="not-sure")&&(e.choice=c);try{const b=localStorage.getItem("booking");if(b){const v=JSON.parse(b);v.person_name&&(e.name=v.person_name),v.contact&&(e.email=v.contact)}}catch{}h.value=!1});const D={BOOKING_API_ENDPOINT:B,bookingParams:l,formData:e,errors:y,isSubmitting:g,submitSuccess:i,submitError:u,showArrivalDetails:x,isInitialLoading:h,currentPrice:S,handleSubmit:async()=>{if(!(!e.name.trim()||!e.email.trim())){g.value=!0,u.value="";try{const m=e.choice==="guided"?"Guided":e.choice==="self"?"Self-Service":"Decide on arrival",c=S.value*e.peopleCount,b={name:e.name,email:e.email,peopleCount:e.peopleCount,i:l.id,title:`Ice Bath (${m})`,teacher:"Studio",date:l.date,display_date:l.date,time:l.timeslot,price:c.toString(),product:"Ice Bath",experience_type:e.choice,submittedAt:new Date().toISOString()};if(!(await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("Submission failed");localStorage.setItem("booking",JSON.stringify({person_name:e.name,contact:e.email})),i.value=!0,setTimeout(()=>{const A=new URLSearchParams({name:e.name,type:"icebath",date:l.date,time:l.timeslot,peopleCount:e.peopleCount.toString(),experience:m,price:c.toString()});window.location.href=`/after-icebath?${A.toString()}`},1500)}catch{u.value="Something went wrong. Please try again."}finally{g.value=!1}}},resetForm:()=>{i.value=!1,u.value=""},ref:f,reactive:k,onMounted:P,computed:C};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},H={key:0,class:"loading-overlay"},V={class:"booking-form-card"},G={key:0,class:"success-state"},M={class:"arrival-info-card"},q={key:0,class:"arrival-details-content animate-fade-down"},z={class:"form-field"},U={class:"people-selector"},Y=["onClick"],j={key:0,class:"form-error"},J={class:"form-field"},R={class:"type-selector"},W={class:"form-field"},K={key:0,class:"form-error"},Q={class:"form-field"},X={key:0,class:"form-error"},Z=["disabled"],$={key:0,class:"button-loader"},ee={key:1},oe={key:0,class:"button-hint"},te={key:1,class:"error-message"},ie={class:"booking-info-card"},ae={class:"booking-details"},se={key:0,class:"booking-detail-item"},ne={class:"booking-detail-value"},le={key:1,class:"booking-detail-item"},re={class:"booking-detail-value"},de={class:"booking-detail-item"},me={class:"booking-detail-value"},ce={class:"booking-detail-item"},fe={class:"booking-detail-value"},ue={class:"booking-detail-item"},be={class:"booking-detail-value"},ve={class:"booking-detail-item"},pe={class:"booking-detail-value",style:{"font-weight":"700","font-size":"1.25em",color:"white"}};function ge(I,t,l,e,y,g){return n(),a("div",{class:p(["booking-container",{"is-loading":e.isInitialLoading}])},[e.isInitialLoading?(n(),a("div",H,t[6]||(t[6]=[o("div",{class:"loader"},null,-1),o("p",null,"Loading booking details...",-1)]))):r("",!0),o("div",V,[e.submitSuccess?(n(),a("div",G,[t[7]||(t[7]=F('<div class="success-icon" data-v-f99fbedd><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-f99fbedd><circle cx="12" cy="12" r="10" data-v-f99fbedd></circle><path d="M9 12l2 2 4-4" data-v-f99fbedd></path></svg></div><h2 class="success-title" data-v-f99fbedd>Booking Confirmed!</h2><p class="success-message" data-v-f99fbedd> Your ice bath session has been reserved. Don&#39;t forget to <strong data-v-f99fbedd>bring a towel</strong>! üßò‚Äç‚ôÄÔ∏è‚ùÑÔ∏è </p>',3)),o("button",{onClick:e.resetForm,class:"reset-button"}," Book Another Session ")])):(n(),a("form",{key:1,onSubmit:N(e.handleSubmit,["prevent"]),class:"booking-form"},[t[19]||(t[19]=o("div",{class:"arrival-notice"},[o("span",{class:"icon"},"‚ÑπÔ∏è"),o("p",null,[d("Don't forget to "),o("strong",null,"bring a towel"),d(" and swimwear! We provide everything else.")])],-1)),o("div",M,[t[10]||(t[10]=o("h4",null,"Arrival Information",-1)),o("p",null,[t[8]||(t[8]=d("Your selected arrival: ")),o("strong",null,s(e.bookingParams.timeslot),1),d(" ("+s(e.bookingParams.date)+")",1)]),o("div",{class:"info-toggle",onClick:t[0]||(t[0]=i=>e.showArrivalDetails=!e.showArrivalDetails)},s(e.showArrivalDetails?"Hide":"More about arrival"),1),e.showArrivalDetails?(n(),a("div",q,t[9]||(t[9]=[o("p",null,"This is an estimated arrival time so we can prepare the ice for you. You don't need to be exactly on time, but arriving around then helps!",-1),o("p",null,[d("If you have any questions, feel free to "),o("a",{href:"https://wa.me/66823348481",target:"_blank"},"WhatsApp us"),d(".")],-1)]))):r("",!0)]),o("div",z,[t[11]||(t[11]=o("label",{class:"form-label",for:"people-count"}," How many people ",-1)),o("div",U,[(n(),a(E,null,L(8,i=>o("button",{key:i,type:"button",class:p(["people-button",{"people-button--active":e.formData.peopleCount===i}]),onClick:u=>e.formData.peopleCount=i},s(i),11,Y)),64))]),e.errors.peopleCount?(n(),a("div",j,s(e.errors.peopleCount),1)):r("",!0)]),o("div",J,[t[15]||(t[15]=o("label",{class:"form-label"},[d(" Choose your experience "),o("span",{class:"form-required"},"*")],-1)),o("div",R,[o("button",{type:"button",class:p(["type-button",{"type-button--active":e.formData.choice==="self"}]),onClick:t[1]||(t[1]=i=>e.formData.choice="self")},t[12]||(t[12]=[o("span",{class:"type-title"},"Self-Service",-1),o("span",{class:"type-price"},"300 THB",-1)]),2),o("button",{type:"button",class:p(["type-button",{"type-button--active":e.formData.choice==="guided"}]),onClick:t[2]||(t[2]=i=>e.formData.choice="guided")},t[13]||(t[13]=[o("span",{class:"type-title"},"Guided",-1),o("span",{class:"type-price"},"400 THB",-1)]),2),o("button",{type:"button",class:p(["type-button",{"type-button--active":e.formData.choice==="not-sure"}]),onClick:t[3]||(t[3]=i=>e.formData.choice="not-sure")},t[14]||(t[14]=[o("span",{class:"type-title"},"Not Sure",-1),o("span",{class:"type-price"},"Decide at studio",-1)]),2)]),t[16]||(t[16]=o("p",{class:"form-description"},"Guided sessions include breathing guidance and temperature acclimatization help.",-1))]),o("div",W,[t[17]||(t[17]=o("label",{class:"form-label",for:"name"},[d(" Your name "),o("span",{class:"form-required"},"*")],-1)),_(o("input",{id:"name","onUpdate:modelValue":t[4]||(t[4]=i=>e.formData.name=i),type:"text",class:"form-input",placeholder:"Enter your name",autocomplete:"name"},null,512),[[w,e.formData.name]]),e.errors.name?(n(),a("div",K,s(e.errors.name),1)):r("",!0)]),o("div",Q,[t[18]||(t[18]=o("label",{class:"form-label",for:"email"},[d(" Email "),o("span",{class:"form-required"},"*")],-1)),_(o("input",{id:"email","onUpdate:modelValue":t[5]||(t[5]=i=>e.formData.email=i),type:"email",class:"form-input",placeholder:"your.email@example.com",autocomplete:"email"},null,512),[[w,e.formData.email]]),e.errors.email?(n(),a("div",X,s(e.errors.email),1)):r("",!0)]),o("button",{type:"submit",class:"submit-button",disabled:e.isSubmitting||!e.formData.name.trim()||!e.formData.email.trim()},[e.isSubmitting?(n(),a("span",$)):(n(),a("span",ee,"Confirm Ice Bath Booking"))],8,Z),!e.formData.name.trim()||!e.formData.email.trim()?(n(),a("div",oe," Please fill your name and email to continue ")):r("",!0),e.submitError?(n(),a("div",te,s(e.submitError),1)):r("",!0)],32))]),o("div",ie,[t[29]||(t[29]=o("h2",{class:"booking-info-title"},"Ice Bath Summary",-1)),o("div",ae,[t[26]||(t[26]=o("div",{class:"booking-detail-item"},[o("div",{class:"booking-detail-label"},"Session"),o("div",{class:"booking-detail-value"},"Ice Bath (All-day Access)")],-1)),e.bookingParams.date?(n(),a("div",se,[t[20]||(t[20]=o("div",{class:"booking-detail-label"},"Date",-1)),o("div",ne,s(e.bookingParams.date),1)])):r("",!0),e.bookingParams.timeslot?(n(),a("div",le,[t[21]||(t[21]=o("div",{class:"booking-detail-label"},"First Arrival",-1)),o("div",re,s(e.bookingParams.timeslot),1)])):r("",!0),o("div",de,[t[22]||(t[22]=o("div",{class:"booking-detail-label"},"Experience",-1)),o("div",me,s(e.formData.choice==="guided"?"Guided":e.formData.choice==="self"?"Self-Service":"Decide on arrival"),1)]),t[27]||(t[27]=o("div",{class:"booking-detail-divider"},null,-1)),o("div",ce,[t[23]||(t[23]=o("div",{class:"booking-detail-label"},"Price per person",-1)),o("div",fe,s(e.formData.choice==="not-sure"?"From 300":e.currentPrice)+" THB",1)]),o("div",ue,[t[24]||(t[24]=o("div",{class:"booking-detail-label"},"Number of People",-1)),o("div",be,s(e.formData.peopleCount),1)]),o("div",ve,[t[25]||(t[25]=o("div",{class:"booking-detail-label",style:{"font-weight":"700","font-size":"1.1em"}},"Total Amount",-1)),o("div",pe,s(e.formData.choice==="not-sure"?"From ":"")+s((e.currentPrice*e.formData.peopleCount).toLocaleString())+" THB ",1)]),t[28]||(t[28]=o("div",{class:"pay-notice"}," Pay in cash at the studio or online when you arrive. ",-1))])])],2)}const _e=T(O,[["render",ge],["__scopeId","data-v-f99fbedd"]]);export{_e as default};
