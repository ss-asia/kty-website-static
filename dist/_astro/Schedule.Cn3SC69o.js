import{g as E,i as X,c as l,o as i,e as S,F as N,r as C,J as Z,n as B,h as T,j as F,K as G,L as A,a as h,t as y,d as W}from"./runtime-core.esm-bundler.BdZShyii.js";/* empty css                       */import{_ as j}from"./_plugin-vue_export-helper.DlAUqK2U.js";const I=()=>{const p=E(null),u=E(!0),n=E(null),e=async()=>{try{const _=await fetch("https://flow.thailandboattickets.com/webhook/kty-schedule-week");if(!_.ok)throw new Error("Failed to fetch schedule");const m=await _.json();p.value={items:m.data||[],date:m._date||null,current_server_time:m.current_server_time||null},n.value=null}catch(_){n.value=_.message}finally{u.value=!1}};return X(()=>{e()}),{schedule:p,loading:u,error:n}},ee={__name:"SkeletonLoader",props:{shape:{type:String,default:"rectangle",validator:p=>["rectangle","circle","text"].includes(p)},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:100},animate:{type:Boolean,default:!0},lines:{type:Number,default:3},lastLineWidth:{type:Number,default:60}},setup(p,{expose:u}){u();const n=p,e=T(()=>{const m={};if(typeof n.width=="number"?m.width=`${n.width}px`:m.width=n.width,typeof n.height=="number"?m.height=`${n.height}px`:m.height=n.height,n.shape==="circle"){const t=typeof n.height=="number"?`${n.height}px`:n.height;m.width=t,m.height=t}return m}),_={props:n,skeletonStyle:e,computed:T};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},te={key:0,class:"skeleton-loader__lines"};function ne(p,u,n,e,_,m){return i(),l("div",{class:B(["skeleton-loader",`skeleton-loader--${n.shape}`,{"skeleton-loader--animate":n.animate}]),style:Z(e.skeletonStyle)},[n.shape==="text"?(i(),l("div",te,[(i(!0),l(N,null,C(n.lines,t=>(i(),l("div",{key:t,class:"skeleton-loader__line",style:Z({width:t===n.lines?`${n.lastLineWidth}%`:"100%"})},null,4))),128))])):S("",!0)],6)}const se=j(ee,[["render",ne],["__scopeId","data-v-b904458f"]]),oe={__name:"ScheduleSchema",setup(p,{expose:u}){u();const{schedule:n}=I(),e=t=>{const g={"@context":"https://schema.org","@type":"Event",name:t.name,description:`Join us at KOH TAO YOGA for a ${t.name} class with ${t.teacher}. Located just 50m from the pier in the heart of Koh Tao, our state-of-the-art 200+ mÂ² wellness center is the island's largest and most welcoming yoga studio. Our climate-controlled facility features a modern main studio and two stunning rooftop shalas with panoramic ocean views. We offer over 8 different yoga styles including Vinyasa Flow, Ashtanga, Hatha, Yin and Acro yoga, plus transformative wellness experiences like breathwork, ice baths (Wim Hof Method), and sound healing. With 35+ weekly classes, expert-certified teachers, and small group sizes, we ensure personalized attention whether you're a beginner or advanced practitioner. Our peaceful space is never crowded, equipment is top quality, and our location couldn't be more convenient. Experience the best yoga in Koh Tao and let our passionate instructors guide you on your wellness journey. Join our friendly community and discover why we're recognized as Koh Tao's premier yoga and wellness destination.`,startDate:t.date?.start,endDate:t.date?.end,eventStatus:"https://schema.org/EventScheduled",location:{"@type":"Place",name:"KOH TAO YOGA - Yoga & Wellness Center",address:{"@type":"PostalAddress",streetAddress:"25, 111 Koh Phangan, Koh Tao",addressLocality:"Tambon Ko Tao",addressRegion:"Amphoe Ko Pha-ngan, Chang Wat Surat Thani",postalCode:"84360",addressCountry:"TH"}},performer:{"@type":"Person",name:t.teacher},organizer:{"@type":"Organization",name:"KOH TAO YOGA - Yoga & Wellness Center",url:"https://kohtaoyoga.com"}};t.bookingUrl&&t.price&&(g.offers={"@type":"Offer",url:t.bookingUrl,price:parseFloat(t.price.replace(/[^\d.]/g,"")),priceCurrency:"THB",availability:"https://schema.org/InStock",validFrom:t.date?.start});const a=Math.floor(Math.random()*18)+1;return g.image=[`https://kohtaoyoga.com/images/misc/kty${a}.jpeg`],g},_=T(()=>n.value?.items?n.value.items.map(t=>e(t)):[]);F(_,t=>{t&&t.length>0&&(document.querySelectorAll('script[data-schema="event"]').forEach(a=>a.remove()),t.forEach((a,O)=>{const k=document.createElement("script");k.type="application/ld+json",k.setAttribute("data-schema","event"),k.setAttribute("data-event-index",O),k.text=JSON.stringify(a,null,2),document.head.appendChild(k)}))},{immediate:!0}),G(()=>{document.querySelectorAll('script[data-schema="event"]').forEach(g=>g.remove())});const m={schedule:n,generateEventSchema:e,eventSchemas:_,computed:T,watch:F,onUnmounted:G,get useSchedule(){return I}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}};function ae(p,u,n,e,_,m){return null}const re=j(oe,[["render",ae]]),le={__name:"Schedule",setup(p,{expose:u}){u();const{schedule:n,loading:e,error:_}=I(),m=new Date,t=new Date;t.setDate(m.getDate()+1);const g={weekday:"long"},a=new Intl.DateTimeFormat("en-US",g).format(m),O=new Intl.DateTimeFormat("en-US",g).format(t),k=s=>{const r=new Date,f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(s),o=r.getDay();let c=f-o;c<0&&(c+=7);const d=new Date(r);return d.setDate(r.getDate()+c),d.setHours(0,0,0,0),d},w=s=>{if(!s.date||!s.date.start)return null;const r=new Date(s.date.start);return isNaN(r.getTime())?null:r},H=s=>{if(!s.date||!s.date.end)return null;const r=new Date(s.date.end);return isNaN(r.getTime())?null:r},R=s=>{const r=H(s);return r?r.getTime()<D().getTime():!1},V=s=>s===a?`Today (${s})`:s===O?`Tomorrow (${s})`:s,q=s=>{const r=k(s),f={month:"short",day:"numeric"};return new Intl.DateTimeFormat("en-US",f).format(r)},D=()=>n.value?.current_server_time?new Date(n.value.current_server_time):new Date,P=s=>{const r=w(s);if(!r)return{isNextWeek:!1,isWithinLimit:!0};const f=D();f.setHours(0,0,0,0);const o=new Date(r);o.setHours(0,0,0,0);const c=Math.ceil((o.getTime()-f.getTime())/(1e3*60*60*24)),d=c>=7,x=c<=10;return{isNextWeek:d,isWithinLimit:x}},J=T(()=>{if(!n.value||!n.value.items)return{currentWeek:{},nextWeek:{}};const s={},r={},o=D().getTime()-10*60*60*1e3;n.value.items.forEach(d=>{if(!d.day)return;const x=w(d);if(x&&x.getTime()<=o)return;const{isNextWeek:M,isWithinLimit:b}=P(d);if(!b)return;const v=M?r:s;v[d.day]||(v[d.day]=[]),v[d.day].push(d)});const c=d=>{const x={};return Object.keys(d).sort((b,v)=>{const U=k(b),L=k(v);return U.getTime()-L.getTime()}).forEach(b=>{const v=d[b];v.sort((U,L)=>{const z=w(U),Y=w(L);return!z||!Y?0:z.getTime()-Y.getTime()}),x[b]=v}),x};return{currentWeek:c(s),nextWeek:c(r)}}),$=T(()=>{const s=D().getTime();let r=null,f=1/0;if(!n.value||!n.value.items)return null;for(const o of n.value.items){const c=w(o);if(c&&c.getTime()>s){const d=c.getTime()-s;d<f&&(f=d,r=o)}}if(r){const o=w(r);console.log("[DEBUG nextClassItem] Selected:",{name:r.name,id:r.id,now:new Date(s).toISOString(),nowBkk:new Date(s).toLocaleString("en-US",{timeZone:"Asia/Bangkok"}),classTime:o?.toISOString(),classTimeBkk:o?.toLocaleString("en-US",{timeZone:"Asia/Bangkok"}),diffHours:(f/(1e3*60*60)).toFixed(2)})}return r}),Q=s=>{const r=D(),f=s.getTime()-r.getTime();if(f<0)return"";const o=Math.floor(f/(1e3*60)),c=Math.floor(o/60),d=Math.floor(c/24);return d>0?`in ${d}d ${c%24}h ${o%60}m`:c>0?`in ${c}h ${o%60}m`:o>0?`in ${o}m`:"now"};F(()=>n.value,s=>{if(!s||!s.items)return;const r=D();console.log("=== SCHEDULE DEBUG INFO ==="),console.log("Server Time (Asia/Thailand):",s.current_server_time||"Not available"),console.log("Current Date/Time (using server time):",r.toLocaleString("en-US",{timeZone:"Asia/Bangkok",timeZoneName:"short",weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})),console.log("Current Date/Time (ISO):",r.toISOString()),console.log("");const f={};s.items.forEach(o=>{if(!o.day)return;f[o.day]||(f[o.day]=[]);const c=o.date?.start?new Date(o.date.start):null,d=o.date?.end?new Date(o.date.end):null;f[o.day].push({name:o.name,start:c?c.toLocaleString("en-US",{timeZone:"Asia/Bangkok",timeZoneName:"short",weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",end:d?d.toLocaleString("en-US",{timeZone:"Asia/Bangkok",timeZoneName:"short",weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",startISO:o.date?.start||"N/A",endISO:o.date?.end||"N/A"})}),Object.keys(f).sort().forEach(o=>{console.log(`--- ${o} ---`),f[o].forEach((c,d)=>{console.log(`  ${d+1}. ${c.name}`),console.log(`     Start: ${c.start} (${c.startISO})`),console.log(`     End:   ${c.end} (${c.endISO})`)}),console.log("")}),console.log("=== END SCHEDULE DEBUG INFO ===")},{immediate:!0,deep:!0});const K={schedule:n,loading:e,error:_,today:m,tomorrow:t,options:g,todayName:a,tomorrowName:O,getDayDate:k,getDateTimeFromItem:w,getEndDateTimeFromItem:H,isClassPast:R,getFormattedDayName:V,getFormattedDateForDay:q,getCurrentTime:D,checkItemClassification:P,groupedSchedule:J,nextClassItem:$,formatTimeRemaining:Q,ref:E,computed:T,watch:F,get useSchedule(){return I},SkeletonLoader:se,ScheduleSchema:re};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}},ie={class:"schedule-container"},ce={key:0,class:"schedule-content"},de={key:1,class:"error-message"},ue={key:2,class:"schedule-content"},he={key:0,class:"next-class-highlight"},me={class:"time-remaining"},ge=["href"],fe={key:0,class:"day-title"},ye={class:"day-date"},_e={key:1,class:"class-list"},pe={class:"class-info"},ke={class:"class-name"},Se={class:"class-details"},ve={class:"class-time"},we={class:"class-teacher"},De={key:0,class:"class-price"},xe=["href"],Te={key:2,class:"no-classes"},be={key:1,class:"next-week-section"},Ne={key:0,class:"day-title"},Ce={class:"day-date"},Oe={key:1,class:"class-list"},Ae={class:"class-info"},We={class:"class-name"},Ee={class:"class-details"},Fe={class:"class-time"},Ie={class:"class-teacher"},Ue={key:0,class:"class-price"},Le=["href"],Be={key:2,class:"no-classes"};function je(p,u,n,e,_,m){return i(),l(N,null,[A(e.ScheduleSchema),h("div",ie,[e.loading?(i(),l("div",ce,[u[0]||(u[0]=h("h1",{class:"schedule-title"},"Yoga & Wellness Schedule",-1)),A(e.SkeletonLoader),u[1]||(u[1]=h("br",null,null,-1)),A(e.SkeletonLoader),u[2]||(u[2]=h("br",null,null,-1)),A(e.SkeletonLoader)])):e.error?(i(),l("div",de,"Error: "+y(e.error),1)):(i(),l("div",ue,[u[5]||(u[5]=h("h1",{class:"schedule-title"},"Yoga & Wellness Schedule",-1)),u[6]||(u[6]=h("p",{class:"schedule-subtitle"},[h("strong",null,"Booking is optional"),W(" you can also just come. Pay on arrival. ")],-1)),e.nextClassItem?(i(),l("div",he,[u[3]||(u[3]=h("h3",null,"Next Class:",-1)),h("p",null,[W(y(e.nextClassItem.name)+" at "+y(e.nextClassItem.time)+" with "+y(e.nextClassItem.teacher)+" ",1),h("span",me,"("+y(e.formatTimeRemaining(e.getDateTimeFromItem(e.nextClassItem)))+")",1)]),e.nextClassItem.bookingUrl?(i(),l("a",{key:0,href:e.nextClassItem.bookingUrl,target:"_blank",rel:"noopener noreferrer",class:"book-now-button next-class-button"},"Reserve mat",8,ge)):S("",!0)])):S("",!0),(i(!0),l(N,null,C(e.groupedSchedule.currentWeek||{},(t,g)=>(i(),l("div",{key:g,class:"schedule-day-group"},[t&&t.length>0?(i(),l("h2",fe,[W(y(e.getFormattedDayName(g))+" ",1),h("span",ye,y(e.getFormattedDateForDay(g)),1)])):S("",!0),t&&t.length>0?(i(),l("ul",_e,[(i(!0),l(N,null,C(t,a=>(i(),l("li",{key:a.id,class:B({"class-item":!0,"past-class":e.isClassPast(a),"next-class":e.nextClassItem&&a.id===e.nextClassItem.id})},[h("div",pe,[h("div",ke,y(a.name),1),h("div",Se,[h("span",ve,y(a.time),1),h("span",we,y(a.teacher),1),a.price?(i(),l("span",De,y(a.price),1)):S("",!0)])]),a.bookingUrl&&!e.isClassPast(a)?(i(),l("a",{key:0,href:a.bookingUrl,target:"_blank",rel:"noopener noreferrer",class:"book-now-button"},"Reserve mat",8,xe)):S("",!0)],2))),128))])):(i(),l("p",Te,"No classes scheduled for "+y(g),1))]))),128)),e.groupedSchedule.nextWeek&&Object.keys(e.groupedSchedule.nextWeek).length>0?(i(),l("div",be,[u[4]||(u[4]=h("h2",{class:"next-week-header"},"Next Week",-1)),(i(!0),l(N,null,C(e.groupedSchedule.nextWeek||{},(t,g)=>(i(),l("div",{key:g,class:"schedule-day-group"},[t&&t.length>0?(i(),l("h2",Ne,[W(y(e.getFormattedDayName(g))+" ",1),h("span",Ce,y(e.getFormattedDateForDay(g)),1)])):S("",!0),t&&t.length>0?(i(),l("ul",Oe,[(i(!0),l(N,null,C(t,a=>(i(),l("li",{key:a.id,class:B({"class-item":!0,"past-class":e.isClassPast(a),"next-class":a===e.nextClassItem})},[h("div",Ae,[h("div",We,y(a.name),1),h("div",Ee,[h("span",Fe,y(a.time),1),h("span",Ie,y(a.teacher),1),a.price?(i(),l("span",Ue,y(a.price),1)):S("",!0)])]),a.bookingUrl&&!e.isClassPast(a)?(i(),l("a",{key:0,href:a.bookingUrl,target:"_blank",rel:"noopener noreferrer",class:"book-now-button"},"Reserve mat",8,Le)):S("",!0)],2))),128))])):(i(),l("p",Be,"No classes scheduled for "+y(g),1))]))),128))])):S("",!0)]))])],64)}const Me=j(le,[["render",je],["__scopeId","data-v-2ef1b9c7"]]);export{Me as default};
